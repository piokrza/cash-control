@if (isLoading$ | async) {
  <p-progressSpinner class="spinner" />
} @else {
  <section class="cards">
    @for (item of cashFlowDataset$ | async; track $index; let last = $last) {
      <a [routerLink]="['../', 'cash-flow']">
        <p-card>
          <h3 class="heading">
            <p class="m-0">{{ 'overview.' + item.label | translate }}</p>
            <span [ngClass]="{ 'text--success': item.label === 'totalIncome', 'text--danger': item.label === 'totalExpense' }">
              {{ item.data ? (item.data | number) : '-' }} {{ last ? '' : 'PLN' }}
            </span>
          </h3>
        </p-card>
      </a>
    }
  </section>

  <div class="charts">
    <ctrl-container styleClass="px-0">
      <div class="card flex justify-content-center">
        <p-chart [data]="(cashFlowChartData$ | async)?.data" type="pie"></p-chart>
      </div>
    </ctrl-container>

    <ctrl-container styleClass="px-0">
      @if (taskerData$ | async; as taskerData) {
        <p>{{ 'overview.todos' | translate }}: {{ taskerData.totalLength }}</p>
        <p>{{ 'overview.completed' | translate }}: {{ taskerData.completedLength }}</p>
      }
    </ctrl-container>
  </div>
}
